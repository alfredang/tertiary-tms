{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"Welcome to Lumina","text":"AI-Powered Training Management System <p>Designed for Singapore's Education Sector</p>"},{"location":"#overview","title":"Overview","text":"<p>Lumina is a comprehensive Training Management System built specifically for Singapore's training providers. It streamlines the entire learning lifecycle from course creation to certification, with built-in support for Singapore's government funding schemes.</p>"},{"location":"#key-features","title":"Key Features","text":"<ul> <li>Multi-Tenant Architecture - Support multiple training providers on a single platform</li> <li>Role-Based Access Control - Learners, Trainers, Admins, and Developers</li> <li>Course Management - Create courses, topics, subtopics, and assessments</li> <li>Class Scheduling - Manage course runs with trainers and venues</li> <li>Smart Enrollment - Automated fee calculations with funding deductions</li> <li>Payment Processing - Stripe integration for secure payments</li> <li>Singapore Funding Support - SSG, SkillsFuture Credit, PSEA, MCES, UTAP, IBF</li> <li>AI-Powered Learning - Gemini AI integration for personalized learning paths</li> <li>Progress Tracking - Monitor learner progress and assessment results</li> </ul>"},{"location":"#live-demo","title":"Live Demo","text":"Component URL Frontend https://tertiary-tms.vercel.app Backend API https://backend-brown-gamma-63.vercel.app"},{"location":"#demo-credentials","title":"Demo Credentials","text":"Role Email Password Admin <code>admin@tertiary.edu.sg</code> <code>admin123</code> Trainer <code>john.smith@tertiary.edu.sg</code> <code>trainer123</code> Learner <code>alice@example.com</code> <code>learner123</code>"},{"location":"#tech-stack","title":"Tech Stack","text":"Layer Technology Frontend React 18, TypeScript, Vite, Tailwind CSS Backend Node.js, Express, TypeScript Database PostgreSQL, Prisma ORM Authentication JWT Payments Stripe AI Google Gemini Hosting Vercel, Neon"},{"location":"#quick-links","title":"Quick Links","text":"<ul> <li>Installation Guide</li> <li>API Reference</li> <li>Deployment Guide</li> <li>Contributing</li> </ul>"},{"location":"contributing/","title":"Contributing to Lumina","text":"<p>Thank you for your interest in contributing to Lumina! This guide will help you get started.</p>"},{"location":"contributing/#code-of-conduct","title":"Code of Conduct","text":"<p>Please be respectful and constructive in all interactions. We welcome contributors of all skill levels.</p>"},{"location":"contributing/#getting-started","title":"Getting Started","text":""},{"location":"contributing/#1-fork-the-repository","title":"1. Fork the Repository","text":"<ol> <li>Go to github.com/alfredang/lumina</li> <li>Click Fork</li> <li>Clone your fork:</li> </ol> <pre><code>git clone https://github.com/YOUR_USERNAME/lumina.git\ncd lumina\n</code></pre>"},{"location":"contributing/#2-set-up-development-environment","title":"2. Set Up Development Environment","text":"<p>Follow the Installation Guide to set up your local environment.</p>"},{"location":"contributing/#3-create-a-branch","title":"3. Create a Branch","text":"<pre><code>git checkout -b feature/your-feature-name\n</code></pre> <p>Branch naming conventions:</p> Prefix Use Case <code>feature/</code> New features <code>fix/</code> Bug fixes <code>docs/</code> Documentation <code>refactor/</code> Code refactoring <code>test/</code> Adding tests"},{"location":"contributing/#development-workflow","title":"Development Workflow","text":""},{"location":"contributing/#frontend-development","title":"Frontend Development","text":"<pre><code># Start frontend dev server\nnpm run dev\n\n# Run linting\nnpm run lint\n\n# Run type checking\nnpm run type-check\n</code></pre>"},{"location":"contributing/#backend-development","title":"Backend Development","text":"<pre><code>cd backend\n\n# Start backend dev server\nnpm run dev\n\n# Run linting\nnpm run lint\n\n# Run tests\nnpm run test\n\n# Generate Prisma client\nnpm run db:generate\n</code></pre>"},{"location":"contributing/#code-style","title":"Code Style","text":""},{"location":"contributing/#typescript","title":"TypeScript","text":"<ul> <li>Use TypeScript for all new code</li> <li>Enable strict mode</li> <li>Use interfaces for object types</li> <li>Prefer <code>const</code> over <code>let</code></li> </ul> <pre><code>// Good\ninterface User {\n  id: string;\n  email: string;\n  role: UserRole;\n}\n\nconst getUserById = async (id: string): Promise&lt;User | null&gt; =&gt; {\n  return await prisma.user.findUnique({ where: { id } });\n};\n\n// Avoid\nvar getUserById = function(id) {\n  return prisma.user.findUnique({ where: { id } });\n};\n</code></pre>"},{"location":"contributing/#react-components","title":"React Components","text":"<ul> <li>Use functional components with hooks</li> <li>Use TypeScript for props</li> <li>Keep components focused and small</li> </ul> <pre><code>// Good\ninterface ButtonProps {\n  label: string;\n  onClick: () =&gt; void;\n  variant?: 'primary' | 'secondary';\n}\n\nexport const Button: React.FC&lt;ButtonProps&gt; = ({\n  label,\n  onClick,\n  variant = 'primary'\n}) =&gt; {\n  return (\n    &lt;button\n      className={`btn btn-${variant}`}\n      onClick={onClick}\n    &gt;\n      {label}\n    &lt;/button&gt;\n  );\n};\n</code></pre>"},{"location":"contributing/#csstailwind","title":"CSS/Tailwind","text":"<ul> <li>Use Tailwind utility classes</li> <li>Extract common patterns to components</li> <li>Use consistent spacing (Tailwind defaults)</li> </ul>"},{"location":"contributing/#making-changes","title":"Making Changes","text":""},{"location":"contributing/#1-write-code","title":"1. Write Code","text":"<ul> <li>Follow existing patterns in the codebase</li> <li>Add comments for complex logic</li> <li>Update types as needed</li> </ul>"},{"location":"contributing/#2-test-your-changes","title":"2. Test Your Changes","text":"<ul> <li>Test manually in the browser</li> <li>Run existing tests</li> <li>Add new tests for new features</li> </ul>"},{"location":"contributing/#3-update-documentation","title":"3. Update Documentation","text":"<p>If your change affects: - API endpoints: Update <code>docs/api/</code> - Configuration: Update <code>docs/getting-started/configuration.md</code> - User-facing features: Update <code>docs/user-guide/</code></p>"},{"location":"contributing/#4-commit-your-changes","title":"4. Commit Your Changes","text":"<p>Write clear commit messages:</p> <pre><code># Good\ngit commit -m \"Add password reset functionality\"\ngit commit -m \"Fix enrollment status not updating after payment\"\n\n# Avoid\ngit commit -m \"fix bug\"\ngit commit -m \"updates\"\n</code></pre>"},{"location":"contributing/#submitting-a-pull-request","title":"Submitting a Pull Request","text":""},{"location":"contributing/#1-push-your-branch","title":"1. Push Your Branch","text":"<pre><code>git push origin feature/your-feature-name\n</code></pre>"},{"location":"contributing/#2-create-pull-request","title":"2. Create Pull Request","text":"<ol> <li>Go to your fork on GitHub</li> <li>Click Compare &amp; pull request</li> <li>Fill out the PR template:</li> </ol> <pre><code>## Description\nBrief description of changes\n\n## Type of Change\n- [ ] Bug fix\n- [ ] New feature\n- [ ] Documentation\n- [ ] Refactoring\n\n## Testing\nHow did you test these changes?\n\n## Screenshots (if applicable)\nAdd screenshots for UI changes\n</code></pre>"},{"location":"contributing/#3-address-review-comments","title":"3. Address Review Comments","text":"<ul> <li>Respond to all comments</li> <li>Make requested changes</li> <li>Push updates to the same branch</li> </ul>"},{"location":"contributing/#reporting-issues","title":"Reporting Issues","text":""},{"location":"contributing/#bug-reports","title":"Bug Reports","text":"<p>Include:</p> <ol> <li>Description: What happened?</li> <li>Steps to Reproduce: How can we reproduce it?</li> <li>Expected Behavior: What should happen?</li> <li>Screenshots: If applicable</li> <li>Environment: Browser, OS, Node version</li> </ol>"},{"location":"contributing/#feature-requests","title":"Feature Requests","text":"<p>Include:</p> <ol> <li>Problem: What problem does this solve?</li> <li>Solution: What would you like to see?</li> <li>Alternatives: Any alternatives considered?</li> </ol>"},{"location":"contributing/#project-structure","title":"Project Structure","text":"<pre><code>lumina/\n\u251c\u2500\u2500 components/          # React components\n\u251c\u2500\u2500 context/            # React context providers\n\u251c\u2500\u2500 hooks/              # Custom React hooks\n\u251c\u2500\u2500 services/           # API clients\n\u251c\u2500\u2500 types.ts            # Shared TypeScript types\n\u251c\u2500\u2500 constants.ts        # Application constants\n\u2502\n\u251c\u2500\u2500 backend/\n\u2502   \u251c\u2500\u2500 src/\n\u2502   \u2502   \u251c\u2500\u2500 config/     # Configuration files\n\u2502   \u2502   \u251c\u2500\u2500 controllers/ # Request handlers\n\u2502   \u2502   \u251c\u2500\u2500 middleware/ # Express middleware\n\u2502   \u2502   \u251c\u2500\u2500 routes/     # API routes\n\u2502   \u2502   \u251c\u2500\u2500 services/   # Business logic\n\u2502   \u2502   \u2514\u2500\u2500 utils/      # Utilities\n\u2502   \u2514\u2500\u2500 prisma/         # Database schema\n\u2502\n\u2514\u2500\u2500 docs/               # MkDocs documentation\n</code></pre>"},{"location":"contributing/#questions","title":"Questions?","text":"<ul> <li>Open an issue with the <code>question</code> label</li> <li>Check existing issues for answers</li> </ul> <p>Thank you for contributing!</p>"},{"location":"api/authentication/","title":"Authentication API","text":"<p>Lumina uses JWT (JSON Web Tokens) for authentication.</p>"},{"location":"api/authentication/#overview","title":"Overview","text":"Token Type Expiry Storage Access Token 15 minutes Memory/localStorage Refresh Token 7 days httpOnly cookie"},{"location":"api/authentication/#endpoints","title":"Endpoints","text":""},{"location":"api/authentication/#register","title":"Register","text":"<p>Create a new user account.</p> <pre><code>POST /api/auth/register\nContent-Type: application/json\n</code></pre> <p>Request Body:</p> <pre><code>{\n  \"email\": \"user@example.com\",\n  \"password\": \"SecurePassword123!\",\n  \"firstName\": \"John\",\n  \"lastName\": \"Doe\",\n  \"role\": \"Learner\"\n}\n</code></pre> <p>Response (201 Created):</p> <pre><code>{\n  \"user\": {\n    \"id\": \"uuid\",\n    \"email\": \"user@example.com\",\n    \"firstName\": \"John\",\n    \"lastName\": \"Doe\",\n    \"role\": \"Learner\"\n  },\n  \"accessToken\": \"eyJhbGciOiJIUzI1NiIs...\"\n}\n</code></pre> <p>Errors:</p> Status Description 400 Invalid input data 409 Email already registered"},{"location":"api/authentication/#login","title":"Login","text":"<p>Authenticate and receive tokens.</p> <pre><code>POST /api/auth/login\nContent-Type: application/json\n</code></pre> <p>Request Body:</p> <pre><code>{\n  \"email\": \"user@example.com\",\n  \"password\": \"SecurePassword123!\"\n}\n</code></pre> <p>Response (200 OK):</p> <pre><code>{\n  \"user\": {\n    \"id\": \"uuid\",\n    \"email\": \"user@example.com\",\n    \"firstName\": \"John\",\n    \"lastName\": \"Doe\",\n    \"role\": \"Learner\"\n  },\n  \"accessToken\": \"eyJhbGciOiJIUzI1NiIs...\"\n}\n</code></pre> <p>The refresh token is set as an httpOnly cookie.</p> <p>Errors:</p> Status Description 401 Invalid credentials 404 User not found"},{"location":"api/authentication/#refresh-token","title":"Refresh Token","text":"<p>Get a new access token using the refresh token.</p> <pre><code>POST /api/auth/refresh\n</code></pre> <p>The refresh token is automatically sent via cookie.</p> <p>Response (200 OK):</p> <pre><code>{\n  \"accessToken\": \"eyJhbGciOiJIUzI1NiIs...\"\n}\n</code></pre> <p>Errors:</p> Status Description 401 Invalid or expired refresh token"},{"location":"api/authentication/#get-current-user","title":"Get Current User","text":"<p>Get the authenticated user's profile.</p> <pre><code>GET /api/auth/me\nAuthorization: Bearer &lt;access_token&gt;\n</code></pre> <p>Response (200 OK):</p> <pre><code>{\n  \"id\": \"uuid\",\n  \"email\": \"user@example.com\",\n  \"firstName\": \"John\",\n  \"lastName\": \"Doe\",\n  \"role\": \"Learner\",\n  \"createdAt\": \"2024-01-15T10:30:00Z\"\n}\n</code></pre> <p>Errors:</p> Status Description 401 Unauthorized (missing or invalid token)"},{"location":"api/authentication/#logout","title":"Logout","text":"<p>Invalidate the refresh token.</p> <pre><code>POST /api/auth/logout\nAuthorization: Bearer &lt;access_token&gt;\n</code></pre> <p>Response (200 OK):</p> <pre><code>{\n  \"message\": \"Logged out successfully\"\n}\n</code></pre>"},{"location":"api/authentication/#token-usage","title":"Token Usage","text":""},{"location":"api/authentication/#access-token","title":"Access Token","text":"<p>Include in Authorization header:</p> <pre><code>GET /api/protected-resource\nAuthorization: Bearer eyJhbGciOiJIUzI1NiIs...\n</code></pre>"},{"location":"api/authentication/#token-payload","title":"Token Payload","text":"<pre><code>{\n  \"userId\": \"uuid\",\n  \"email\": \"user@example.com\",\n  \"role\": \"Learner\",\n  \"trainingProviderId\": \"uuid or null\",\n  \"iat\": 1704067200,\n  \"exp\": 1704068100\n}\n</code></pre>"},{"location":"api/authentication/#role-based-access","title":"Role-Based Access","text":"<p>Different roles have different permissions:</p> Role Description <code>Learner</code> Basic access, can enroll in courses <code>Trainer</code> Can manage assigned classes <code>Admin</code> Full management access <code>Developer</code> API and system access <code>TrainingProvider</code> Multi-tenant admin <p>Endpoints that require specific roles will return:</p> <pre><code>{\n  \"error\": \"Forbidden\",\n  \"message\": \"Insufficient permissions\"\n}\n</code></pre>"},{"location":"api/authentication/#code-examples","title":"Code Examples","text":""},{"location":"api/authentication/#javascripttypescript","title":"JavaScript/TypeScript","text":"<pre><code>// Login\nconst response = await fetch('/api/auth/login', {\n  method: 'POST',\n  headers: { 'Content-Type': 'application/json' },\n  body: JSON.stringify({ email, password }),\n  credentials: 'include' // Important for cookies\n});\n\nconst { accessToken, user } = await response.json();\n\n// Use access token\nconst data = await fetch('/api/courses', {\n  headers: {\n    'Authorization': `Bearer ${accessToken}`\n  }\n});\n</code></pre>"},{"location":"api/authentication/#curl","title":"cURL","text":"<pre><code># Login\ncurl -X POST https://api.example.com/api/auth/login \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\"email\":\"user@example.com\",\"password\":\"password123\"}' \\\n  -c cookies.txt\n\n# Use access token\ncurl https://api.example.com/api/courses \\\n  -H \"Authorization: Bearer eyJhbG...\"\n</code></pre>"},{"location":"api/authentication/#security-best-practices","title":"Security Best Practices","text":"<p>Security Notes</p> <ul> <li>Never store access tokens in localStorage for sensitive applications</li> <li>Always use HTTPS in production</li> <li>Implement token rotation for long sessions</li> <li>Log out users on suspected compromise</li> </ul>"},{"location":"api/courses/","title":"Courses API","text":"<p>Endpoints for managing courses and course runs.</p>"},{"location":"api/courses/#courses","title":"Courses","text":""},{"location":"api/courses/#list-courses","title":"List Courses","text":"<p>Get all courses with optional filtering.</p> <pre><code>GET /api/courses\nAuthorization: Bearer &lt;token&gt;\n</code></pre> <p>Query Parameters:</p> Parameter Type Description <code>category</code> string Filter by category <code>mode</code> string Filter by delivery mode <code>status</code> string Filter by status (draft, published, archived) <code>page</code> number Page number (default: 1) <code>limit</code> number Items per page (default: 20) <p>Response (200 OK):</p> <pre><code>{\n  \"courses\": [\n    {\n      \"id\": \"uuid\",\n      \"name\": \"Python Programming\",\n      \"description\": \"Learn Python from scratch\",\n      \"category\": \"Technical\",\n      \"deliveryMode\": \"Blended\",\n      \"durationHours\": 40,\n      \"fee\": 1500.00,\n      \"status\": \"Published\",\n      \"topics\": [...]\n    }\n  ],\n  \"pagination\": {\n    \"page\": 1,\n    \"limit\": 20,\n    \"total\": 45,\n    \"pages\": 3\n  }\n}\n</code></pre>"},{"location":"api/courses/#get-course","title":"Get Course","text":"<p>Get a single course by ID.</p> <pre><code>GET /api/courses/:id\nAuthorization: Bearer &lt;token&gt;\n</code></pre> <p>Response (200 OK):</p> <pre><code>{\n  \"id\": \"uuid\",\n  \"name\": \"Python Programming\",\n  \"description\": \"Learn Python from scratch\",\n  \"category\": \"Technical\",\n  \"deliveryMode\": \"Blended\",\n  \"durationHours\": 40,\n  \"fee\": 1500.00,\n  \"status\": \"Published\",\n  \"ssgFundable\": true,\n  \"skillsFutureEligible\": true,\n  \"topics\": [\n    {\n      \"id\": \"uuid\",\n      \"name\": \"Getting Started\",\n      \"order\": 1,\n      \"subtopics\": [\n        {\n          \"id\": \"uuid\",\n          \"name\": \"Installing Python\",\n          \"order\": 1,\n          \"durationMinutes\": 30\n        }\n      ]\n    }\n  ],\n  \"assessments\": [\n    {\n      \"id\": \"uuid\",\n      \"name\": \"Final Assessment\",\n      \"type\": \"Quiz\",\n      \"passingScore\": 70\n    }\n  ]\n}\n</code></pre>"},{"location":"api/courses/#create-course","title":"Create Course","text":"<p>Create a new course (Admin only).</p> <pre><code>POST /api/courses\nAuthorization: Bearer &lt;token&gt;\nContent-Type: application/json\n</code></pre> <p>Request Body:</p> <pre><code>{\n  \"name\": \"Python Programming\",\n  \"description\": \"Learn Python from scratch\",\n  \"category\": \"Technical\",\n  \"deliveryMode\": \"Blended\",\n  \"durationHours\": 40,\n  \"fee\": 1500.00,\n  \"ssgFundable\": true,\n  \"skillsFutureEligible\": true,\n  \"topics\": [\n    {\n      \"name\": \"Getting Started\",\n      \"order\": 1,\n      \"subtopics\": [\n        {\n          \"name\": \"Installing Python\",\n          \"order\": 1,\n          \"durationMinutes\": 30,\n          \"content\": \"Step by step installation guide...\"\n        }\n      ]\n    }\n  ]\n}\n</code></pre> <p>Response (201 Created):</p> <pre><code>{\n  \"id\": \"uuid\",\n  \"name\": \"Python Programming\",\n  ...\n}\n</code></pre>"},{"location":"api/courses/#update-course","title":"Update Course","text":"<p>Update an existing course (Admin only).</p> <pre><code>PUT /api/courses/:id\nAuthorization: Bearer &lt;token&gt;\nContent-Type: application/json\n</code></pre> <p>Request Body: (partial update supported)</p> <pre><code>{\n  \"name\": \"Python Programming Masterclass\",\n  \"fee\": 1800.00\n}\n</code></pre>"},{"location":"api/courses/#delete-course","title":"Delete Course","text":"<p>Delete a course (Admin only).</p> <pre><code>DELETE /api/courses/:id\nAuthorization: Bearer &lt;token&gt;\n</code></pre> <p>Response (204 No Content)</p>"},{"location":"api/courses/#course-runs","title":"Course Runs","text":""},{"location":"api/courses/#list-course-runs","title":"List Course Runs","text":"<p>Get all course runs.</p> <pre><code>GET /api/course-runs\nAuthorization: Bearer &lt;token&gt;\n</code></pre> <p>Query Parameters:</p> Parameter Type Description <code>courseId</code> string Filter by course <code>status</code> string upcoming, ongoing, completed <code>trainerId</code> string Filter by trainer <p>Response (200 OK):</p> <pre><code>{\n  \"courseRuns\": [\n    {\n      \"id\": \"uuid\",\n      \"courseId\": \"uuid\",\n      \"courseName\": \"Python Programming\",\n      \"startDate\": \"2024-03-01\",\n      \"endDate\": \"2024-03-15\",\n      \"venue\": \"Training Room A\",\n      \"trainer\": {\n        \"id\": \"uuid\",\n        \"name\": \"John Smith\"\n      },\n      \"capacity\": 20,\n      \"enrolled\": 15,\n      \"status\": \"Upcoming\"\n    }\n  ]\n}\n</code></pre>"},{"location":"api/courses/#get-upcoming-classes","title":"Get Upcoming Classes","text":"<p>Get upcoming course runs.</p> <pre><code>GET /api/course-runs/upcoming\nAuthorization: Bearer &lt;token&gt;\n</code></pre>"},{"location":"api/courses/#get-ongoing-classes","title":"Get Ongoing Classes","text":"<p>Get currently running course runs.</p> <pre><code>GET /api/course-runs/ongoing\nAuthorization: Bearer &lt;token&gt;\n</code></pre>"},{"location":"api/courses/#create-course-run","title":"Create Course Run","text":"<p>Schedule a new course run (Admin only).</p> <pre><code>POST /api/course-runs\nAuthorization: Bearer &lt;token&gt;\nContent-Type: application/json\n</code></pre> <p>Request Body:</p> <pre><code>{\n  \"courseId\": \"uuid\",\n  \"startDate\": \"2024-03-01\",\n  \"endDate\": \"2024-03-15\",\n  \"venue\": \"Training Room A\",\n  \"trainerId\": \"uuid\",\n  \"capacity\": 20,\n  \"schedule\": \"Mon/Wed/Fri 9:00-17:00\"\n}\n</code></pre>"},{"location":"api/courses/#assign-trainer","title":"Assign Trainer","text":"<p>Assign or change trainer for a course run.</p> <pre><code>POST /api/course-runs/:id/assign-trainer\nAuthorization: Bearer &lt;token&gt;\nContent-Type: application/json\n</code></pre> <p>Request Body:</p> <pre><code>{\n  \"trainerId\": \"uuid\"\n}\n</code></pre>"},{"location":"api/courses/#error-responses","title":"Error Responses","text":"<p>All endpoints may return these errors:</p> Status Description 400 Invalid request data 401 Unauthorized 403 Forbidden (insufficient permissions) 404 Resource not found 500 Server error <p>Error Response Format:</p> <pre><code>{\n  \"error\": \"Not Found\",\n  \"message\": \"Course not found\",\n  \"statusCode\": 404\n}\n</code></pre>"},{"location":"api/enrollments/","title":"Enrollments API","text":"<p>Endpoints for managing enrollments.</p>"},{"location":"api/enrollments/#endpoints","title":"Endpoints","text":""},{"location":"api/enrollments/#list-enrollments","title":"List Enrollments","text":"<p>Get enrollments (filtered by user role).</p> <pre><code>GET /api/enrollments\nAuthorization: Bearer &lt;token&gt;\n</code></pre> <p>Query Parameters:</p> Parameter Type Description <code>status</code> string Filter by status <code>courseRunId</code> string Filter by course run <code>learnerId</code> string Filter by learner (admin only) <code>page</code> number Page number <code>limit</code> number Items per page <p>Response (200 OK):</p> <pre><code>{\n  \"enrollments\": [\n    {\n      \"id\": \"uuid\",\n      \"learnerId\": \"uuid\",\n      \"learnerName\": \"Alice Wong\",\n      \"courseRunId\": \"uuid\",\n      \"courseName\": \"Python Programming\",\n      \"status\": \"Paid\",\n      \"enrollmentDate\": \"2024-02-15\",\n      \"fees\": {\n        \"grossFee\": 1500.00,\n        \"gstAmount\": 135.00,\n        \"netPayable\": 490.50\n      },\n      \"progress\": 45\n    }\n  ],\n  \"pagination\": {...}\n}\n</code></pre>"},{"location":"api/enrollments/#get-enrollment","title":"Get Enrollment","text":"<p>Get a single enrollment.</p> <pre><code>GET /api/enrollments/:id\nAuthorization: Bearer &lt;token&gt;\n</code></pre> <p>Response (200 OK):</p> <pre><code>{\n  \"id\": \"uuid\",\n  \"learnerId\": \"uuid\",\n  \"learner\": {\n    \"id\": \"uuid\",\n    \"name\": \"Alice Wong\",\n    \"email\": \"alice@example.com\"\n  },\n  \"courseRun\": {\n    \"id\": \"uuid\",\n    \"courseName\": \"Python Programming\",\n    \"startDate\": \"2024-03-01\",\n    \"endDate\": \"2024-03-15\",\n    \"trainer\": \"John Smith\"\n  },\n  \"status\": \"Paid\",\n  \"enrollmentDate\": \"2024-02-15\",\n  \"fees\": {\n    \"grossFee\": 1500.00,\n    \"discount\": 0,\n    \"gstAmount\": 135.00,\n    \"totalWithGst\": 1635.00,\n    \"funding\": {\n      \"ssgGrant\": 817.50,\n      \"skillsFutureCredit\": 200.00,\n      \"psea\": 0,\n      \"utap\": 127.00\n    },\n    \"netPayable\": 490.50\n  },\n  \"progress\": {\n    \"completed\": 18,\n    \"total\": 40,\n    \"percentage\": 45\n  },\n  \"completedSubtopics\": [\"uuid1\", \"uuid2\", ...],\n  \"assessmentResults\": [...]\n}\n</code></pre>"},{"location":"api/enrollments/#create-enrollment","title":"Create Enrollment","text":"<p>Create a new enrollment.</p> <pre><code>POST /api/enrollments\nAuthorization: Bearer &lt;token&gt;\nContent-Type: application/json\n</code></pre> <p>Request Body:</p> <pre><code>{\n  \"courseRunId\": \"uuid\",\n  \"learnerId\": \"uuid\",\n  \"fundingOptions\": {\n    \"useSkillsFuture\": true,\n    \"skillsFutureAmount\": 200.00,\n    \"usePsea\": false,\n    \"useUtap\": true\n  }\n}\n</code></pre> <p>Response (201 Created):</p> <pre><code>{\n  \"id\": \"uuid\",\n  \"status\": \"Pending\",\n  ...\n}\n</code></pre>"},{"location":"api/enrollments/#calculate-fees","title":"Calculate Fees","text":"<p>Calculate fees with funding for an enrollment.</p> <pre><code>POST /api/enrollments/:id/calculate-fees\nAuthorization: Bearer &lt;token&gt;\nContent-Type: application/json\n</code></pre> <p>Request Body:</p> <pre><code>{\n  \"fundingOptions\": {\n    \"useSkillsFuture\": true,\n    \"skillsFutureAmount\": 200.00,\n    \"usePsea\": false,\n    \"useUtap\": true\n  }\n}\n</code></pre> <p>Response (200 OK):</p> <pre><code>{\n  \"grossCourseFee\": 1500.00,\n  \"discount\": 0,\n  \"discountedFee\": 1500.00,\n  \"gstAmount\": 135.00,\n  \"totalWithGst\": 1635.00,\n  \"fundingBreakdown\": {\n    \"ssgGrant\": 817.50,\n    \"skillsFutureCredit\": 200.00,\n    \"pseaClaim\": 0,\n    \"mcesClaim\": 0,\n    \"utapClaim\": 127.00,\n    \"ibfFunding\": 0\n  },\n  \"netPayable\": 490.50\n}\n</code></pre>"},{"location":"api/enrollments/#update-progress","title":"Update Progress","text":"<p>Update learner's progress (mark subtopic complete).</p> <pre><code>PUT /api/enrollments/:id/progress\nAuthorization: Bearer &lt;token&gt;\nContent-Type: application/json\n</code></pre> <p>Request Body:</p> <pre><code>{\n  \"subtopicId\": \"uuid\",\n  \"completed\": true\n}\n</code></pre> <p>Response (200 OK):</p> <pre><code>{\n  \"progress\": {\n    \"completed\": 19,\n    \"total\": 40,\n    \"percentage\": 47.5\n  }\n}\n</code></pre>"},{"location":"api/enrollments/#complete-subtopic","title":"Complete Subtopic","text":"<p>Mark a subtopic as completed.</p> <pre><code>POST /api/enrollments/:id/complete-subtopic/:subtopicId\nAuthorization: Bearer &lt;token&gt;\n</code></pre> <p>Response (200 OK):</p> <pre><code>{\n  \"message\": \"Subtopic marked as complete\",\n  \"progress\": 47.5\n}\n</code></pre>"},{"location":"api/enrollments/#approve-enrollment","title":"Approve Enrollment","text":"<p>Approve a pending enrollment (Admin only).</p> <pre><code>POST /api/enrollments/:id/approve\nAuthorization: Bearer &lt;token&gt;\n</code></pre> <p>Response (200 OK):</p> <pre><code>{\n  \"id\": \"uuid\",\n  \"status\": \"Approved\",\n  ...\n}\n</code></pre>"},{"location":"api/enrollments/#reject-enrollment","title":"Reject Enrollment","text":"<p>Reject a pending enrollment (Admin only).</p> <pre><code>POST /api/enrollments/:id/reject\nAuthorization: Bearer &lt;token&gt;\nContent-Type: application/json\n</code></pre> <p>Request Body:</p> <pre><code>{\n  \"reason\": \"Prerequisite not met\"\n}\n</code></pre>"},{"location":"api/enrollments/#cancel-enrollment","title":"Cancel Enrollment","text":"<p>Cancel an enrollment.</p> <pre><code>POST /api/enrollments/:id/cancel\nAuthorization: Bearer &lt;token&gt;\nContent-Type: application/json\n</code></pre> <p>Request Body:</p> <pre><code>{\n  \"reason\": \"Personal circumstances\"\n}\n</code></pre>"},{"location":"api/enrollments/#enrollment-status","title":"Enrollment Status","text":"Status Description <code>Draft</code> Enrollment started, not submitted <code>Pending</code> Awaiting approval <code>Approved</code> Approved, awaiting payment <code>Paid</code> Payment confirmed <code>InProgress</code> Currently attending <code>Completed</code> Successfully completed <code>Rejected</code> Application rejected <code>Cancelled</code> Cancelled by learner/admin <code>Withdrawn</code> Withdrawn after starting"},{"location":"api/enrollments/#error-responses","title":"Error Responses","text":"Status Description 400 Invalid enrollment data 401 Unauthorized 403 Cannot access this enrollment 404 Enrollment not found 409 Already enrolled in this course run"},{"location":"api/payments/","title":"Payments API","text":"<p>Endpoints for payment processing with Stripe integration.</p>"},{"location":"api/payments/#endpoints","title":"Endpoints","text":""},{"location":"api/payments/#create-payment-intent","title":"Create Payment Intent","text":"<p>Create a Stripe PaymentIntent for an enrollment.</p> <pre><code>POST /api/payments/create-intent\nAuthorization: Bearer &lt;token&gt;\nContent-Type: application/json\n</code></pre> <p>Request Body:</p> <pre><code>{\n  \"enrollmentId\": \"uuid\",\n  \"amount\": 490.50,\n  \"currency\": \"sgd\",\n  \"description\": \"Python Programming - March 2024\"\n}\n</code></pre> <p>Response (200 OK):</p> <pre><code>{\n  \"clientSecret\": \"pi_xxx_secret_xxx\",\n  \"paymentIntentId\": \"pi_xxx\",\n  \"amount\": 49050,\n  \"currency\": \"sgd\"\n}\n</code></pre> <p>Note</p> <p>The <code>amount</code> in the response is in cents (49050 = $490.50).</p>"},{"location":"api/payments/#confirm-payment","title":"Confirm Payment","text":"<p>Confirm a payment after Stripe checkout.</p> <pre><code>POST /api/payments/confirm\nAuthorization: Bearer &lt;token&gt;\nContent-Type: application/json\n</code></pre> <p>Request Body:</p> <pre><code>{\n  \"paymentIntentId\": \"pi_xxx\",\n  \"enrollmentId\": \"uuid\"\n}\n</code></pre> <p>Response (200 OK):</p> <pre><code>{\n  \"success\": true,\n  \"payment\": {\n    \"id\": \"uuid\",\n    \"amount\": 490.50,\n    \"status\": \"succeeded\",\n    \"enrollmentId\": \"uuid\"\n  }\n}\n</code></pre>"},{"location":"api/payments/#get-payment","title":"Get Payment","text":"<p>Get payment details.</p> <pre><code>GET /api/payments/:id\nAuthorization: Bearer &lt;token&gt;\n</code></pre> <p>Response (200 OK):</p> <pre><code>{\n  \"id\": \"uuid\",\n  \"enrollmentId\": \"uuid\",\n  \"amount\": 490.50,\n  \"currency\": \"SGD\",\n  \"status\": \"succeeded\",\n  \"stripePaymentIntentId\": \"pi_xxx\",\n  \"createdAt\": \"2024-02-15T10:30:00Z\",\n  \"metadata\": {\n    \"courseName\": \"Python Programming\",\n    \"learnerName\": \"Alice Wong\"\n  }\n}\n</code></pre>"},{"location":"api/payments/#list-payments","title":"List Payments","text":"<p>Get all payments (Admin only).</p> <pre><code>GET /api/payments\nAuthorization: Bearer &lt;token&gt;\n</code></pre> <p>Query Parameters:</p> Parameter Type Description <code>status</code> string Filter by status <code>startDate</code> string Filter from date <code>endDate</code> string Filter to date <code>enrollmentId</code> string Filter by enrollment <p>Response (200 OK):</p> <pre><code>{\n  \"payments\": [\n    {\n      \"id\": \"uuid\",\n      \"amount\": 490.50,\n      \"status\": \"succeeded\",\n      \"enrollmentId\": \"uuid\",\n      \"learnerName\": \"Alice Wong\",\n      \"courseName\": \"Python Programming\",\n      \"createdAt\": \"2024-02-15T10:30:00Z\"\n    }\n  ],\n  \"summary\": {\n    \"total\": 25,\n    \"succeeded\": 23,\n    \"pending\": 1,\n    \"failed\": 1,\n    \"totalAmount\": 12500.00\n  }\n}\n</code></pre>"},{"location":"api/payments/#refund-payment","title":"Refund Payment","text":"<p>Process a refund (Admin only).</p> <pre><code>POST /api/payments/:id/refund\nAuthorization: Bearer &lt;token&gt;\nContent-Type: application/json\n</code></pre> <p>Request Body:</p> <pre><code>{\n  \"amount\": 490.50,\n  \"reason\": \"Course cancelled\"\n}\n</code></pre> <p>For partial refund:</p> <pre><code>{\n  \"amount\": 245.25,\n  \"reason\": \"Early withdrawal - 50% refund\"\n}\n</code></pre> <p>Response (200 OK):</p> <pre><code>{\n  \"refundId\": \"re_xxx\",\n  \"amount\": 490.50,\n  \"status\": \"succeeded\",\n  \"paymentId\": \"uuid\"\n}\n</code></pre>"},{"location":"api/payments/#stripe-webhook","title":"Stripe Webhook","text":"<p>Handle Stripe webhook events.</p> <pre><code>POST /api/payments/webhook\nStripe-Signature: &lt;signature&gt;\nContent-Type: application/json\n</code></pre> <p>Handled Events:</p> Event Action <code>payment_intent.succeeded</code> Update enrollment to Paid <code>payment_intent.payment_failed</code> Log failure, notify admin <code>charge.refunded</code> Update payment status <code>charge.dispute.created</code> Flag for review <p>Response (200 OK):</p> <pre><code>{\n  \"received\": true\n}\n</code></pre>"},{"location":"api/payments/#calculate-fees","title":"Calculate Fees","text":"<p>Calculate fees with funding breakdown.</p> <pre><code>POST /api/payments/calculate-fees\nAuthorization: Bearer &lt;token&gt;\nContent-Type: application/json\n</code></pre> <p>Request Body:</p> <pre><code>{\n  \"courseId\": \"uuid\",\n  \"learnerId\": \"uuid\",\n  \"fundingOptions\": {\n    \"useSkillsFuture\": true,\n    \"skillsFutureAmount\": 200.00,\n    \"usePsea\": false,\n    \"useUtap\": true,\n    \"useMces\": false\n  }\n}\n</code></pre> <p>Response (200 OK):</p> <pre><code>{\n  \"grossCourseFee\": 1500.00,\n  \"discount\": 0,\n  \"discountedFee\": 1500.00,\n  \"gstAmount\": 135.00,\n  \"totalWithGst\": 1635.00,\n  \"fundingBreakdown\": {\n    \"ssgGrant\": 817.50,\n    \"ssgRate\": 0.50,\n    \"skillsFutureCredit\": 200.00,\n    \"pseaClaim\": 0,\n    \"mcesClaim\": 0,\n    \"utapClaim\": 127.00,\n    \"ibfFunding\": 0\n  },\n  \"netPayable\": 490.50\n}\n</code></pre>"},{"location":"api/payments/#payment-status","title":"Payment Status","text":"Status Description <code>pending</code> Payment initiated <code>processing</code> Being processed by Stripe <code>succeeded</code> Payment successful <code>failed</code> Payment failed <code>refunded</code> Fully refunded <code>partially_refunded</code> Partially refunded <code>disputed</code> Under dispute"},{"location":"api/payments/#stripe-test-cards","title":"Stripe Test Cards","text":"<p>For testing in development:</p> Card Result 4242 4242 4242 4242 Success 4000 0000 0000 0002 Declined 4000 0025 0000 3155 3D Secure required 4000 0000 0000 9995 Insufficient funds <p>Use any future expiry date and any 3-digit CVC.</p>"},{"location":"api/payments/#frontend-integration","title":"Frontend Integration","text":"<pre><code>import { loadStripe } from '@stripe/stripe-js';\n\nconst stripePromise = loadStripe('pk_test_...');\n\nasync function handlePayment(enrollmentId: string, amount: number) {\n  // Create payment intent\n  const { clientSecret } = await api.post('/payments/create-intent', {\n    enrollmentId,\n    amount\n  });\n\n  // Get Stripe instance\n  const stripe = await stripePromise;\n\n  // Confirm payment\n  const { error, paymentIntent } = await stripe.confirmCardPayment(\n    clientSecret,\n    {\n      payment_method: {\n        card: cardElement,\n        billing_details: { name: 'Alice Wong' }\n      }\n    }\n  );\n\n  if (error) {\n    console.error(error.message);\n  } else if (paymentIntent.status === 'succeeded') {\n    // Confirm with backend\n    await api.post('/payments/confirm', {\n      paymentIntentId: paymentIntent.id,\n      enrollmentId\n    });\n  }\n}\n</code></pre>"},{"location":"api/payments/#error-responses","title":"Error Responses","text":"Status Description 400 Invalid payment data 401 Unauthorized 402 Payment required/failed 404 Payment not found 409 Already paid"},{"location":"deployment/database/","title":"Database Setup","text":"<p>This guide covers setting up PostgreSQL for Lumina using Neon.</p>"},{"location":"deployment/database/#why-neon","title":"Why Neon?","text":"<p>Neon is a serverless PostgreSQL platform that offers:</p> <ul> <li>Serverless: Scales to zero, pay only for usage</li> <li>Branching: Create database branches for testing</li> <li>Generous Free Tier: 0.5 GB storage, 190 compute hours</li> <li>Edge-Compatible: Works well with Vercel</li> </ul>"},{"location":"deployment/database/#create-neon-project","title":"Create Neon Project","text":""},{"location":"deployment/database/#step-1-sign-up","title":"Step 1: Sign Up","text":"<ol> <li>Go to neon.tech</li> <li>Sign up with GitHub, Google, or email</li> </ol>"},{"location":"deployment/database/#step-2-create-project","title":"Step 2: Create Project","text":"<ol> <li>Click Create Project</li> <li>Enter project name: <code>lumina</code></li> <li>Select region closest to your users</li> <li>Click Create Project</li> </ol>"},{"location":"deployment/database/#step-3-get-connection-string","title":"Step 3: Get Connection String","text":"<p>After project creation, you'll see the connection details:</p> <pre><code>postgresql://user:password@ep-xxx-xxx.us-east-1.aws.neon.tech/neondb?sslmode=require\n</code></pre> <p>Copy this for your <code>DATABASE_URL</code>.</p>"},{"location":"deployment/database/#configure-prisma","title":"Configure Prisma","text":""},{"location":"deployment/database/#connection-string","title":"Connection String","text":"<p>Add to <code>backend/.env</code>:</p> <pre><code>DATABASE_URL=\"postgresql://user:password@ep-xxx-xxx.us-east-1.aws.neon.tech/neondb?sslmode=require\"\n</code></pre>"},{"location":"deployment/database/#prisma-schema","title":"Prisma Schema","text":"<p>The schema is at <code>backend/prisma/schema.prisma</code>:</p> <pre><code>generator client {\n  provider      = \"prisma-client-js\"\n  binaryTargets = [\"native\", \"rhel-openssl-3.0.x\"]\n}\n\ndatasource db {\n  provider = \"postgresql\"\n  url      = env(\"DATABASE_URL\")\n}\n</code></pre> <p>Binary Targets</p> <p>The <code>rhel-openssl-3.0.x</code> target is required for Vercel deployment.</p>"},{"location":"deployment/database/#run-migrations","title":"Run Migrations","text":""},{"location":"deployment/database/#development","title":"Development","text":"<pre><code>cd backend\n\n# Create migration\nnpx prisma migrate dev --name init\n\n# Apply migration\nnpx prisma migrate dev\n</code></pre>"},{"location":"deployment/database/#production","title":"Production","text":"<pre><code># Apply migrations without creating new ones\nnpx prisma migrate deploy\n</code></pre>"},{"location":"deployment/database/#seed-database","title":"Seed Database","text":"<p>Run the seed script to populate initial data:</p> <pre><code>cd backend\nnpm run db:seed\n</code></pre> <p>This creates:</p> <ul> <li>Training provider</li> <li>Admin, Trainer, and Learner users</li> <li>Sample courses with topics and subtopics</li> <li>Sample enrollments</li> </ul>"},{"location":"deployment/database/#test-credentials","title":"Test Credentials","text":"Role Email Password Admin admin@tertiary.edu.sg admin123 Trainer john.smith@tertiary.edu.sg trainer123 Learner alice@example.com learner123"},{"location":"deployment/database/#database-schema","title":"Database Schema","text":"<p>Key tables:</p> <pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  TrainingProvider   \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n           \u2502\n    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n    \u25bc             \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510   \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  User  \u2502   \u2502 Course  \u2502\n\u2514\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2518   \u2514\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2518\n     \u2502            \u2502\n     \u2502       \u250c\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2510\n     \u2502       \u25bc         \u25bc\n     \u2502   \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n     \u2502   \u2502 Topic \u2502  \u2502CourseRun\n     \u2502   \u2514\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2518\n     \u2502       \u2502          \u2502\n     \u2502       \u25bc          \u2502\n     \u2502   \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510   \u2502\n     \u2502   \u2502 Subtopic \u2502   \u2502\n     \u2502   \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518   \u2502\n     \u2502                  \u2502\n     \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n                        \u25bc\n                  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n                  \u2502 Enrollment \u2502\n                  \u2514\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                        \u2502\n              \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n              \u25bc                   \u25bc\n        \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510       \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n        \u2502 Payment  \u2502       \u2502  Fees    \u2502\n        \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518       \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"deployment/database/#prisma-studio","title":"Prisma Studio","text":"<p>View and edit data with Prisma Studio:</p> <pre><code>cd backend\nnpx prisma studio\n</code></pre> <p>Opens at <code>http://localhost:5555</code></p>"},{"location":"deployment/database/#backup-restore","title":"Backup &amp; Restore","text":""},{"location":"deployment/database/#neon-backups","title":"Neon Backups","text":"<p>Neon automatically backs up your data. To restore:</p> <ol> <li>Go to Neon Dashboard</li> <li>Select project</li> <li>Click Branches</li> <li>Create branch from point-in-time</li> </ol>"},{"location":"deployment/database/#manual-backup","title":"Manual Backup","text":"<pre><code>pg_dump \"$DATABASE_URL\" &gt; backup.sql\n</code></pre>"},{"location":"deployment/database/#restore","title":"Restore","text":"<pre><code>psql \"$DATABASE_URL\" &lt; backup.sql\n</code></pre>"},{"location":"deployment/database/#connection-pooling","title":"Connection Pooling","text":"<p>For high-traffic applications, use Neon's connection pooler:</p> <pre><code># Pooled connection (port 5432 \u2192 5432 with -pooler suffix)\nDATABASE_URL=\"postgresql://user:pass@ep-xxx-xxx-pooler.us-east-1.aws.neon.tech/neondb?sslmode=require\"\n</code></pre>"},{"location":"deployment/database/#troubleshooting","title":"Troubleshooting","text":""},{"location":"deployment/database/#connection-timeout","title":"Connection Timeout","text":"<pre><code>Error: P1001: Can't reach database server\n</code></pre> <p>Solutions: - Check DATABASE_URL is correct - Verify Neon project is active - Check network/firewall settings</p>"},{"location":"deployment/database/#ssl-required","title":"SSL Required","text":"<pre><code>Error: SSL connection required\n</code></pre> <p>Solution: Add <code>?sslmode=require</code> to connection string</p>"},{"location":"deployment/database/#prisma-client-generation","title":"Prisma Client Generation","text":"<pre><code>Error: Prisma Client not generated\n</code></pre> <p>Solution: <pre><code>npx prisma generate\n</code></pre></p>"},{"location":"deployment/database/#migration-conflicts","title":"Migration Conflicts","text":"<pre><code>Error: Migration failed to apply\n</code></pre> <p>Solution: <pre><code># Reset database (CAUTION: deletes all data)\nnpx prisma migrate reset\n\n# Or manually resolve\nnpx prisma migrate resolve --applied \"migration_name\"\n</code></pre></p>"},{"location":"deployment/database/#alternative-local-postgresql","title":"Alternative: Local PostgreSQL","text":"<p>For local development without Neon:</p>"},{"location":"deployment/database/#macos-homebrew","title":"macOS (Homebrew)","text":"<pre><code>brew install postgresql@16\nbrew services start postgresql@16\ncreatedb lumina_dev\n</code></pre>"},{"location":"deployment/database/#docker","title":"Docker","text":"<pre><code>docker run -d \\\n  --name lumina-db \\\n  -e POSTGRES_DB=lumina \\\n  -e POSTGRES_USER=lumina \\\n  -e POSTGRES_PASSWORD=password \\\n  -p 5432:5432 \\\n  postgres:16\n</code></pre> <p>Connection string: <pre><code>DATABASE_URL=\"postgresql://lumina:password@localhost:5432/lumina\"\n</code></pre></p>"},{"location":"deployment/vercel/","title":"Deploy to Vercel","text":"<p>This guide covers deploying Lumina to Vercel.</p>"},{"location":"deployment/vercel/#prerequisites","title":"Prerequisites","text":"<ul> <li>Vercel account</li> <li>GitHub account (recommended)</li> <li>Neon database (see Database Setup)</li> </ul>"},{"location":"deployment/vercel/#architecture","title":"Architecture","text":"<p>Lumina is deployed as two separate Vercel projects:</p> <pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                    Vercel                        \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502   Frontend Project  \u2502    Backend Project        \u2502\n\u2502   (React + Vite)    \u2502    (Express + Prisma)     \u2502\n\u2502                     \u2502                           \u2502\n\u2502   tertiary-tms      \u2502   backend-xxx             \u2502\n\u2502   .vercel.app       \u2502   .vercel.app             \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                              \u2502\n                              \u25bc\n                    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n                    \u2502  Neon Database  \u2502\n                    \u2502   (PostgreSQL)  \u2502\n                    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"deployment/vercel/#deploy-frontend","title":"Deploy Frontend","text":""},{"location":"deployment/vercel/#option-1-import-from-github","title":"Option 1: Import from GitHub","text":"<ol> <li>Go to Vercel Dashboard</li> <li>Click Add New \u2192 Project</li> <li>Import your GitHub repository</li> <li>Configure:</li> <li>Root Directory: <code>/</code> (leave empty)</li> <li>Framework Preset: Vite</li> <li>Build Command: <code>npm run build</code></li> <li> <p>Output Directory: <code>dist</code></p> </li> <li> <p>Add Environment Variables:    | Name | Value |    |------|-------|    | <code>GEMINI_API_KEY</code> | Your Gemini API key |</p> </li> <li> <p>Click Deploy</p> </li> </ol>"},{"location":"deployment/vercel/#option-2-vercel-cli","title":"Option 2: Vercel CLI","text":"<pre><code># Install Vercel CLI\nnpm install -g vercel\n\n# Login\nvercel login\n\n# Deploy\nvercel\n\n# For production\nvercel --prod\n</code></pre>"},{"location":"deployment/vercel/#deploy-backend","title":"Deploy Backend","text":""},{"location":"deployment/vercel/#step-1-create-backend-project","title":"Step 1: Create Backend Project","text":"<ol> <li>Go to Vercel Dashboard</li> <li>Click Add New \u2192 Project</li> <li>Import the same repository</li> <li>Configure:</li> <li>Root Directory: <code>backend</code></li> <li>Framework Preset: Other</li> <li>Build Command: <code>npm run build</code></li> <li>Output Directory: Leave empty</li> </ol>"},{"location":"deployment/vercel/#step-2-add-environment-variables","title":"Step 2: Add Environment Variables","text":"<p>Add these variables in Vercel settings:</p> Name Value Description <code>DATABASE_URL</code> <code>postgresql://...</code> Neon connection string <code>JWT_ACCESS_SECRET</code> <code>your-secret-key</code> Access token secret <code>JWT_REFRESH_SECRET</code> <code>your-secret-key</code> Refresh token secret <code>STRIPE_SECRET_KEY</code> <code>sk_test_...</code> Stripe secret key <code>STRIPE_WEBHOOK_SECRET</code> <code>whsec_...</code> Stripe webhook secret <code>FRONTEND_URL</code> <code>https://your-frontend.vercel.app</code> Frontend URL <code>NODE_ENV</code> <code>production</code> Environment mode"},{"location":"deployment/vercel/#step-3-deploy","title":"Step 3: Deploy","text":"<p>Click Deploy or run:</p> <pre><code>cd backend\nvercel --prod\n</code></pre>"},{"location":"deployment/vercel/#vercel-configuration","title":"Vercel Configuration","text":""},{"location":"deployment/vercel/#frontend-verceljson-in-root","title":"Frontend (vercel.json in root)","text":"<p>Not required for standard Vite setup.</p>"},{"location":"deployment/vercel/#backend-backendverceljson","title":"Backend (backend/vercel.json)","text":"<pre><code>{\n  \"rewrites\": [\n    { \"source\": \"/(.*)\", \"destination\": \"/api\" }\n  ]\n}\n</code></pre>"},{"location":"deployment/vercel/#backend-entry-point-backendapiindexts","title":"Backend Entry Point (backend/api/index.ts)","text":"<pre><code>import app from '../src/app';\nexport default app;\n</code></pre>"},{"location":"deployment/vercel/#post-deployment-setup","title":"Post-Deployment Setup","text":""},{"location":"deployment/vercel/#1-run-database-migrations","title":"1. Run Database Migrations","text":"<pre><code>cd backend\nDATABASE_URL=\"your-neon-url\" npx prisma migrate deploy\n</code></pre>"},{"location":"deployment/vercel/#2-seed-database","title":"2. Seed Database","text":"<pre><code>DATABASE_URL=\"your-neon-url\" npm run db:seed\n</code></pre>"},{"location":"deployment/vercel/#3-configure-stripe-webhooks","title":"3. Configure Stripe Webhooks","text":"<ol> <li>Go to Stripe Dashboard</li> <li>Add endpoint: <code>https://your-backend.vercel.app/api/payments/webhook</code></li> <li>Select events:</li> <li><code>payment_intent.succeeded</code></li> <li><code>payment_intent.payment_failed</code></li> <li>Copy signing secret to <code>STRIPE_WEBHOOK_SECRET</code></li> </ol>"},{"location":"deployment/vercel/#4-update-frontend-api-url","title":"4. Update Frontend API URL","text":"<p>If using environment-based API URL, add to frontend Vercel project:</p> Name Value <code>VITE_API_URL</code> <code>https://your-backend.vercel.app/api</code>"},{"location":"deployment/vercel/#troubleshooting","title":"Troubleshooting","text":""},{"location":"deployment/vercel/#common-issues","title":"Common Issues","text":"<p>Build Fails - Prisma Client</p> <p>Ensure <code>prisma generate</code> runs before build:</p> <pre><code>{\n  \"scripts\": {\n    \"build\": \"prisma generate &amp;&amp; tsc\"\n  }\n}\n</code></pre> <p>Module Not Found</p> <p>Check <code>tsconfig.json</code>: - Use <code>\"module\": \"CommonJS\"</code> for Vercel - Ensure <code>rootDir</code> includes <code>api</code> folder</p> <p>Database Connection Issues</p> <ul> <li>Verify <code>DATABASE_URL</code> includes <code>?sslmode=require</code></li> <li>Check Neon project is active</li> <li>Verify IP allowlist if applicable</li> </ul> <p>CORS Errors</p> <p>Update <code>FRONTEND_URL</code> in backend environment to match actual frontend domain.</p>"},{"location":"deployment/vercel/#checking-logs","title":"Checking Logs","text":"<ol> <li>Go to Vercel Dashboard</li> <li>Select project</li> <li>Click Deployments</li> <li>Select deployment</li> <li>Click Functions tab</li> <li>View logs</li> </ol>"},{"location":"deployment/vercel/#automatic-deployments","title":"Automatic Deployments","text":"<p>With GitHub integration:</p> <ul> <li>Production: Deploys on push to <code>main</code> branch</li> <li>Preview: Deploys on pull requests</li> </ul> <p>To disable automatic deployments: 1. Go to Project Settings 2. Git \u2192 Production Branch 3. Disable \"Automatically deploy...\"</p>"},{"location":"deployment/vercel/#custom-domain","title":"Custom Domain","text":"<ol> <li>Go to Project Settings \u2192 Domains</li> <li>Add your domain</li> <li>Configure DNS:</li> <li>A Record: <code>76.76.21.21</code></li> <li> <p>CNAME: <code>cname.vercel-dns.com</code></p> </li> <li> <p>Wait for SSL certificate (automatic)</p> </li> </ol>"},{"location":"deployment/vercel/#live-urls","title":"Live URLs","text":"<p>After deployment:</p> Component URL Frontend https://tertiary-tms.vercel.app Backend https://backend-brown-gamma-63.vercel.app"},{"location":"getting-started/configuration/","title":"Configuration","text":"<p>This guide covers all configuration options for Lumina.</p>"},{"location":"getting-started/configuration/#environment-variables","title":"Environment Variables","text":""},{"location":"getting-started/configuration/#backend-environment-variables","title":"Backend Environment Variables","text":"Variable Required Description <code>DATABASE_URL</code> Yes PostgreSQL connection string <code>JWT_ACCESS_SECRET</code> Yes Secret key for access tokens <code>JWT_REFRESH_SECRET</code> Yes Secret key for refresh tokens <code>STRIPE_SECRET_KEY</code> No Stripe API secret key <code>STRIPE_WEBHOOK_SECRET</code> No Stripe webhook signing secret <code>PORT</code> No Server port (default: 3001) <code>NODE_ENV</code> No Environment mode (development/production) <code>FRONTEND_URL</code> Yes Frontend URL for CORS"},{"location":"getting-started/configuration/#frontend-environment-variables","title":"Frontend Environment Variables","text":"Variable Required Description <code>GEMINI_API_KEY</code> No Google Gemini API key for AI features <code>VITE_API_URL</code> No Backend API URL (default: http://localhost:3001/api) <code>VITE_USE_REAL_BACKEND</code> No Enable real backend (default: true)"},{"location":"getting-started/configuration/#jwt-configuration","title":"JWT Configuration","text":"<p>JWT tokens are configured in <code>backend/src/config/jwt.config.ts</code>:</p> <pre><code>export const jwtConfig = {\n  accessSecret: process.env.JWT_ACCESS_SECRET || 'default-access-secret',\n  refreshSecret: process.env.JWT_REFRESH_SECRET || 'default-refresh-secret',\n  accessExpiry: '15m',   // Access token expires in 15 minutes\n  refreshExpiry: '7d',   // Refresh token expires in 7 days\n};\n</code></pre> <p>Security Note</p> <p>Always use strong, unique secrets in production. Never use default values.</p>"},{"location":"getting-started/configuration/#stripe-configuration","title":"Stripe Configuration","text":"<p>Configure Stripe in <code>backend/src/config/stripe.config.ts</code>:</p> <pre><code>export const stripeConfig = {\n  secretKey: process.env.STRIPE_SECRET_KEY || '',\n  webhookSecret: process.env.STRIPE_WEBHOOK_SECRET || '',\n  currency: 'sgd',\n};\n</code></pre>"},{"location":"getting-started/configuration/#setting-up-stripe-webhooks","title":"Setting Up Stripe Webhooks","text":"<ol> <li>Go to Stripe Dashboard &gt; Webhooks</li> <li>Add an endpoint: <code>https://your-backend-url/api/payments/webhook</code></li> <li>Select events to listen for:</li> <li><code>payment_intent.succeeded</code></li> <li><code>payment_intent.payment_failed</code></li> <li>Copy the webhook signing secret to <code>STRIPE_WEBHOOK_SECRET</code></li> </ol>"},{"location":"getting-started/configuration/#database-configuration","title":"Database Configuration","text":"<p>Lumina uses Prisma ORM with PostgreSQL. The database schema is defined in <code>backend/prisma/schema.prisma</code>.</p>"},{"location":"getting-started/configuration/#using-neon-recommended-for-production","title":"Using Neon (Recommended for Production)","text":"<ol> <li>Create a project at neon.tech</li> <li>Copy the connection string</li> <li>Add pooler suffix for connection pooling:</li> </ol> <pre><code>DATABASE_URL=\"postgresql://user:password@host/database?sslmode=require\"\n</code></pre>"},{"location":"getting-started/configuration/#using-local-postgresql","title":"Using Local PostgreSQL","text":"<ol> <li> <p>Create a new database:    <pre><code>createdb lumina_dev\n</code></pre></p> </li> <li> <p>Set the connection string:    <pre><code>DATABASE_URL=\"postgresql://localhost:5432/lumina_dev\"\n</code></pre></p> </li> </ol>"},{"location":"getting-started/configuration/#role-based-access-control","title":"Role-Based Access Control","text":"<p>Lumina supports five user roles:</p> Role Permissions <code>Learner</code> View courses, enroll, track progress <code>Trainer</code> Manage assigned classes, grade assessments <code>Admin</code> Full access to courses, users, enrollments <code>Developer</code> API access, system configuration <code>TrainingProvider</code> Multi-tenant administration <p>Roles are enforced in <code>backend/src/middleware/rbac.middleware.ts</code>.</p>"},{"location":"getting-started/configuration/#singapore-funding-configuration","title":"Singapore Funding Configuration","text":"<p>Funding rules are defined in <code>backend/src/utils/feeCalculator.ts</code>:</p> <pre><code>const FUNDING_RATES = {\n  SSG_STANDARD: 0.50,      // 50% subsidy\n  SSG_ENHANCED: 0.70,      // 70% for SMEs/40+\n  SKILLSFUTURE_MAX: 500,   // Max $500\n  UTAP_RATE: 0.50,         // 50% up to $250/year\n  UTAP_MAX_ANNUAL: 250,\n};\n</code></pre> <p>Adjust these rates based on current government policies.</p>"},{"location":"getting-started/configuration/#cors-configuration","title":"CORS Configuration","text":"<p>CORS is configured in <code>backend/src/app.ts</code>:</p> <pre><code>app.use(cors({\n  origin: process.env.FRONTEND_URL || 'http://localhost:3000',\n  credentials: true,\n}));\n</code></pre> <p>For multiple allowed origins, modify the configuration:</p> <pre><code>app.use(cors({\n  origin: ['http://localhost:3000', 'https://your-domain.com'],\n  credentials: true,\n}));\n</code></pre>"},{"location":"getting-started/installation/","title":"Installation","text":"<p>This guide will help you set up Lumina on your local development environment.</p>"},{"location":"getting-started/installation/#prerequisites","title":"Prerequisites","text":"<p>Before you begin, ensure you have the following installed:</p> <ul> <li>Node.js 18+ - Download Node.js</li> <li>PostgreSQL 14+ - Or a Neon account for serverless Postgres</li> <li>Git - Download Git</li> </ul> <p>Optional (for full functionality):</p> <ul> <li>Stripe Account - For payment processing</li> <li>Google Gemini API Key - For AI features</li> </ul>"},{"location":"getting-started/installation/#clone-the-repository","title":"Clone the Repository","text":"<pre><code>git clone https://github.com/alfredang/lumina.git\ncd lumina\n</code></pre>"},{"location":"getting-started/installation/#install-dependencies","title":"Install Dependencies","text":""},{"location":"getting-started/installation/#frontend","title":"Frontend","text":"<pre><code>npm install\n</code></pre>"},{"location":"getting-started/installation/#backend","title":"Backend","text":"<pre><code>cd backend\nnpm install\n</code></pre>"},{"location":"getting-started/installation/#set-up-environment-variables","title":"Set Up Environment Variables","text":""},{"location":"getting-started/installation/#backend-configuration","title":"Backend Configuration","text":"<p>Create a <code>.env</code> file in the <code>backend</code> directory:</p> <pre><code>cd backend\ncp .env.example .env\n</code></pre> <p>Edit the <code>.env</code> file with your credentials:</p> <pre><code># Database\nDATABASE_URL=\"postgresql://user:password@host/database?sslmode=require\"\n\n# JWT Secrets\nJWT_ACCESS_SECRET=\"your-super-secret-access-key\"\nJWT_REFRESH_SECRET=\"your-super-secret-refresh-key\"\n\n# Stripe (optional)\nSTRIPE_SECRET_KEY=\"sk_test_...\"\nSTRIPE_WEBHOOK_SECRET=\"whsec_...\"\n\n# Server\nPORT=3001\nNODE_ENV=development\nFRONTEND_URL=\"http://localhost:3000\"\n</code></pre>"},{"location":"getting-started/installation/#frontend-configuration","title":"Frontend Configuration","text":"<p>Create a <code>.env</code> file in the root directory:</p> <pre><code>GEMINI_API_KEY=\"your-gemini-api-key\"\n</code></pre>"},{"location":"getting-started/installation/#initialize-the-database","title":"Initialize the Database","text":"<p>Run Prisma migrations to create the database schema:</p> <pre><code>cd backend\nnpx prisma migrate dev\n</code></pre> <p>Seed the database with sample data:</p> <pre><code>npm run db:seed\n</code></pre>"},{"location":"getting-started/installation/#start-development-servers","title":"Start Development Servers","text":""},{"location":"getting-started/installation/#option-1-run-separately","title":"Option 1: Run Separately","text":"<p>Terminal 1 (Backend): <pre><code>cd backend\nnpm run dev\n</code></pre></p> <p>Terminal 2 (Frontend): <pre><code>npm run dev\n</code></pre></p>"},{"location":"getting-started/installation/#option-2-run-with-concurrently","title":"Option 2: Run with Concurrently","text":"<p>If you prefer running both from a single terminal, you can use <code>concurrently</code>:</p> <pre><code>npm install -g concurrently\nconcurrently \"cd backend &amp;&amp; npm run dev\" \"npm run dev\"\n</code></pre>"},{"location":"getting-started/installation/#verify-installation","title":"Verify Installation","text":"<ol> <li>Open your browser and navigate to http://localhost:3000</li> <li>You should see the Lumina login page</li> <li>Log in with one of the demo credentials:</li> <li>Admin: <code>admin@tertiary.edu.sg</code> / <code>admin123</code></li> <li>Learner: <code>alice@example.com</code> / <code>learner123</code></li> </ol>"},{"location":"getting-started/installation/#next-steps","title":"Next Steps","text":"<ul> <li>Configuration Guide - Customize Lumina for your needs</li> <li>Quick Start - Learn the basics of using Lumina</li> </ul>"},{"location":"getting-started/quick-start/","title":"Quick Start","text":"<p>Get up and running with Lumina in minutes.</p>"},{"location":"getting-started/quick-start/#demo-credentials","title":"Demo Credentials","text":"<p>After installation and seeding, use these credentials to explore:</p> Role Email Password Admin <code>admin@tertiary.edu.sg</code> <code>admin123</code> Trainer <code>john.smith@tertiary.edu.sg</code> <code>trainer123</code> Learner <code>alice@example.com</code> <code>learner123</code>"},{"location":"getting-started/quick-start/#as-an-admin","title":"As an Admin","text":""},{"location":"getting-started/quick-start/#create-a-course","title":"Create a Course","text":"<ol> <li>Log in as Admin</li> <li>Navigate to Courses in the sidebar</li> <li>Click Add Course</li> <li>Fill in the course details:</li> <li>Course name and description</li> <li>Category and delivery mode</li> <li>Duration and fees</li> <li>Add topics and subtopics</li> <li>Save the course</li> </ol>"},{"location":"getting-started/quick-start/#schedule-a-course-run","title":"Schedule a Course Run","text":"<ol> <li>Go to Course Runs</li> <li>Click Create Run</li> <li>Select the course</li> <li>Set dates, venue, and capacity</li> <li>Assign a trainer</li> <li>Publish the course run</li> </ol>"},{"location":"getting-started/quick-start/#manage-enrollments","title":"Manage Enrollments","text":"<ol> <li>Go to Enrollments</li> <li>View pending enrollments</li> <li>Approve or reject applications</li> <li>Track payment status</li> </ol>"},{"location":"getting-started/quick-start/#as-a-trainer","title":"As a Trainer","text":""},{"location":"getting-started/quick-start/#view-assigned-classes","title":"View Assigned Classes","text":"<ol> <li>Log in as Trainer</li> <li>Dashboard shows your upcoming classes</li> <li>Click a class to view enrolled learners</li> </ol>"},{"location":"getting-started/quick-start/#grade-assessments","title":"Grade Assessments","text":"<ol> <li>Go to Assessments</li> <li>Select a class</li> <li>Enter grades for each learner</li> <li>Submit grades</li> </ol>"},{"location":"getting-started/quick-start/#as-a-learner","title":"As a Learner","text":""},{"location":"getting-started/quick-start/#browse-courses","title":"Browse Courses","text":"<ol> <li>Log in as Learner</li> <li>Navigate to Browse Courses</li> <li>Use filters to find courses:</li> <li>Category</li> <li>Delivery mode</li> <li>Price range</li> </ol>"},{"location":"getting-started/quick-start/#enroll-in-a-course","title":"Enroll in a Course","text":"<ol> <li>Click on a course</li> <li>Select a class schedule</li> <li>Apply funding (if eligible):</li> <li>SkillsFuture Credit</li> <li>PSEA</li> <li>UTAP</li> <li>Complete payment</li> </ol>"},{"location":"getting-started/quick-start/#track-progress","title":"Track Progress","text":"<ol> <li>Go to My Learning</li> <li>View enrolled courses</li> <li>Track completion progress</li> <li>Access course materials</li> </ol>"},{"location":"getting-started/quick-start/#payment-flow","title":"Payment Flow","text":"<ol> <li>Select Class - Choose a course run to enroll</li> <li>Apply Funding - System calculates eligible subsidies</li> <li>View Fee Breakdown - See gross fee, GST, funding, net payable</li> <li>Make Payment - Secure checkout via Stripe</li> <li>Confirmation - Receive enrollment confirmation</li> </ol>"},{"location":"getting-started/quick-start/#fee-calculation-example","title":"Fee Calculation Example","text":"<p>For a $1,000 course with SSG funding:</p> Item Amount Gross Course Fee $1,000.00 GST (9%) $90.00 Total with GST $1,090.00 SSG Grant (50%) -$545.00 SkillsFuture Credit -$200.00 Net Payable $345.00"},{"location":"getting-started/quick-start/#next-steps","title":"Next Steps","text":"<ul> <li>User Guide - Detailed feature documentation</li> <li>API Reference - For developers</li> <li>Deployment - Deploy your own instance</li> </ul>"},{"location":"user-guide/courses/","title":"Course Management","text":"<p>This guide covers creating and managing courses in Lumina.</p>"},{"location":"user-guide/courses/#course-structure","title":"Course Structure","text":"<p>A course in Lumina consists of:</p> <ul> <li>Basic Information - Name, description, category</li> <li>Topics - Main learning units</li> <li>Subtopics - Detailed lessons within topics</li> <li>Assessments - Quizzes and evaluations</li> <li>Metadata - Fees, duration, delivery mode</li> </ul>"},{"location":"user-guide/courses/#creating-a-course","title":"Creating a Course","text":""},{"location":"user-guide/courses/#step-1-basic-details","title":"Step 1: Basic Details","text":"<ol> <li>Navigate to Courses \u2192 Add Course</li> <li>Enter the course information:</li> </ol> Field Description Course Name Display name for the course Description Detailed course description Category Technical, Business, etc. Delivery Mode Classroom, Online, Blended Duration Total hours Fee Course fee in SGD"},{"location":"user-guide/courses/#step-2-add-topics","title":"Step 2: Add Topics","text":"<p>Topics are the main learning units:</p> <pre><code>Introduction to Python\n\u251c\u2500\u2500 Topic 1: Getting Started\n\u251c\u2500\u2500 Topic 2: Data Types\n\u251c\u2500\u2500 Topic 3: Control Flow\n\u2514\u2500\u2500 Topic 4: Functions\n</code></pre> <p>For each topic, specify:</p> <ul> <li>Topic title</li> <li>Description</li> <li>Duration (hours)</li> <li>Order in course</li> </ul>"},{"location":"user-guide/courses/#step-3-add-subtopics","title":"Step 3: Add Subtopics","text":"<p>Subtopics are detailed lessons:</p> <pre><code>Topic 1: Getting Started\n\u251c\u2500\u2500 1.1 Installing Python\n\u251c\u2500\u2500 1.2 IDE Setup\n\u251c\u2500\u2500 1.3 Hello World\n\u2514\u2500\u2500 1.4 Basic Syntax\n</code></pre> <p>For each subtopic:</p> <ul> <li>Title</li> <li>Content (rich text)</li> <li>Duration (minutes)</li> <li>Resources (optional)</li> </ul>"},{"location":"user-guide/courses/#step-4-add-assessments","title":"Step 4: Add Assessments","text":"<p>Assessments can be:</p> <ul> <li>Quizzes - Multiple choice questions</li> <li>Assignments - Practical tasks</li> <li>Projects - Capstone assessments</li> </ul> <p>Configure:</p> <ul> <li>Assessment type</li> <li>Passing score</li> <li>Time limit (if applicable)</li> <li>Weightage in final grade</li> </ul>"},{"location":"user-guide/courses/#course-runs","title":"Course Runs","text":"<p>A course run is a specific instance of a course with:</p> Field Description Start Date When the class begins End Date When the class ends Schedule Days/times of sessions Venue Physical location or online Trainer Assigned instructor Capacity Maximum enrollments"},{"location":"user-guide/courses/#creating-a-course-run","title":"Creating a Course Run","text":"<ol> <li>Go to Course Runs \u2192 Create Run</li> <li>Select the course</li> <li>Set the schedule:    <pre><code>Start: 2024-03-01\nEnd: 2024-03-15\nSessions: Mon/Wed/Fri 9:00-17:00\n</code></pre></li> <li>Assign a trainer</li> <li>Set venue and capacity</li> <li>Publish the run</li> </ol>"},{"location":"user-guide/courses/#course-categories","title":"Course Categories","text":"<p>Default categories in Lumina:</p> <ul> <li>Technical - IT, programming, data</li> <li>Business - Management, finance</li> <li>Soft Skills - Communication, leadership</li> <li>Compliance - Regulatory training</li> <li>Industry-Specific - Healthcare, F&amp;B, etc.</li> </ul>"},{"location":"user-guide/courses/#delivery-modes","title":"Delivery Modes","text":"Mode Description Classroom In-person training Online Virtual live sessions E-Learning Self-paced online Blended Combination of modes On-the-Job Workplace training"},{"location":"user-guide/courses/#course-status","title":"Course Status","text":"Status Description Draft Course being created Published Available for enrollment Archived No longer offered"},{"location":"user-guide/courses/#funding-eligibility","title":"Funding Eligibility","text":"<p>Configure funding eligibility per course:</p> <ul> <li>[ ] SSG Fundable</li> <li>[ ] SkillsFuture Credit eligible</li> <li>[ ] PSEA claimable</li> <li>[ ] UTAP eligible</li> <li>[ ] IBF certified</li> </ul>"},{"location":"user-guide/courses/#best-practices","title":"Best Practices","text":"<p>Course Design Tips</p> <ul> <li>Keep topics focused on single learning objectives</li> <li>Include practical exercises in subtopics</li> <li>Balance theory and hands-on activities</li> <li>Set realistic duration estimates</li> </ul> <p>Avoid</p> <ul> <li>Overly long subtopics (break into smaller units)</li> <li>Missing assessment criteria</li> <li>Unclear learning outcomes</li> </ul>"},{"location":"user-guide/enrollments/","title":"Enrollments","text":"<p>This guide covers the enrollment process in Lumina.</p>"},{"location":"user-guide/enrollments/#enrollment-lifecycle","title":"Enrollment Lifecycle","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510     \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510     \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510     \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  Draft  \u2502 \u2500\u2500\u25ba \u2502 Pending \u2502 \u2500\u2500\u25ba \u2502 Approved \u2502 \u2500\u2500\u25ba \u2502 Paid \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518     \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518     \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518     \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                     \u2502                                \u2502\n                     \u25bc                                \u25bc\n                \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510                   \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n                \u2502 Rejected \u2502                   \u2502 Completed \u2502\n                \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518                   \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"user-guide/enrollments/#for-learners","title":"For Learners","text":""},{"location":"user-guide/enrollments/#enrolling-in-a-course","title":"Enrolling in a Course","text":"<ol> <li>Browse Courses</li> <li>Navigate to course catalog</li> <li>Use filters (category, mode, price)</li> <li> <p>Click on course for details</p> </li> <li> <p>Select Course Run</p> </li> <li>View available schedules</li> <li>Check trainer and venue</li> <li> <p>Confirm dates work for you</p> </li> <li> <p>Apply Funding</p> </li> <li>System checks eligibility</li> <li>Select applicable funding:<ul> <li>SkillsFuture Credit</li> <li>PSEA</li> <li>UTAP</li> </ul> </li> <li> <p>View fee breakdown</p> </li> <li> <p>Complete Payment</p> </li> <li>Review final amount</li> <li>Enter payment details</li> <li>Receive confirmation</li> </ol>"},{"location":"user-guide/enrollments/#tracking-enrollment-status","title":"Tracking Enrollment Status","text":"Status Meaning Draft Enrollment started but not submitted Pending Awaiting admin approval Approved Approved, pending payment Paid Payment confirmed In Progress Currently attending Completed Successfully finished Rejected Application rejected Cancelled Enrollment cancelled"},{"location":"user-guide/enrollments/#cancellation-policy","title":"Cancellation Policy","text":"<ul> <li>Before Approval: No charge</li> <li>After Approval, Before Payment: No charge</li> <li>After Payment:</li> <li>14+ days before start: 80% refund</li> <li>7-13 days before start: 50% refund</li> <li>Less than 7 days: No refund</li> </ul>"},{"location":"user-guide/enrollments/#for-administrators","title":"For Administrators","text":""},{"location":"user-guide/enrollments/#managing-enrollments","title":"Managing Enrollments","text":"<ol> <li>Navigate to Enrollments</li> <li>Filter by:</li> <li>Status</li> <li>Course</li> <li>Date range</li> <li>Payment status</li> </ol>"},{"location":"user-guide/enrollments/#approving-enrollments","title":"Approving Enrollments","text":"<ol> <li>Click on pending enrollment</li> <li>Review learner details</li> <li>Verify funding applications</li> <li>Click Approve or Reject</li> </ol> <p>Note</p> <p>Rejected enrollments should include a reason for transparency.</p>"},{"location":"user-guide/enrollments/#processing-payments","title":"Processing Payments","text":"<p>For manual payments (bank transfer, cheque):</p> <ol> <li>Select enrollment</li> <li>Click Record Payment</li> <li>Enter payment details:</li> <li>Amount</li> <li>Date</li> <li>Reference number</li> <li>Confirm to update status</li> </ol>"},{"location":"user-guide/enrollments/#bulk-operations","title":"Bulk Operations","text":"<p>Select multiple enrollments to:</p> <ul> <li>Approve all</li> <li>Send reminders</li> <li>Export to CSV</li> </ul>"},{"location":"user-guide/enrollments/#fee-calculation","title":"Fee Calculation","text":""},{"location":"user-guide/enrollments/#components","title":"Components","text":"Component Description Gross Fee Base course fee GST 9% of gross fee Discount Promotional discounts SSG Grant Government subsidy SkillsFuture Individual credit PSEA Education account Net Payable Final amount due"},{"location":"user-guide/enrollments/#example-calculation","title":"Example Calculation","text":"<pre><code>Course Fee:          $1,000.00\nDiscount (10%):       -$100.00\n                    \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\nSubtotal:              $900.00\nGST (9%):              +$81.00\n                    \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\nTotal:                 $981.00\n\nFunding:\n- SSG Grant (50%):    -$490.50\n- SF Credit:          -$200.00\n                    \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\nNet Payable:           $290.50\n</code></pre>"},{"location":"user-guide/enrollments/#progress-tracking","title":"Progress Tracking","text":""},{"location":"user-guide/enrollments/#completion-criteria","title":"Completion Criteria","text":"<p>An enrollment is marked complete when:</p> <ol> <li>All subtopics completed</li> <li>All assessments passed</li> <li>Attendance requirement met</li> </ol>"},{"location":"user-guide/enrollments/#progress-indicators","title":"Progress Indicators","text":"Indicator Meaning 0-25% Just started 26-50% In progress 51-75% More than halfway 76-99% Almost complete 100% Completed"},{"location":"user-guide/enrollments/#notifications","title":"Notifications","text":"<p>Automatic notifications sent for:</p> <ul> <li>Enrollment confirmation</li> <li>Payment reminders</li> <li>Approval/rejection</li> <li>Class reminders (1 week, 1 day before)</li> <li>Completion certificate</li> </ul>"},{"location":"user-guide/enrollments/#reports","title":"Reports","text":"<p>Available enrollment reports:</p> <ul> <li>Enrollment Summary - By status, course, period</li> <li>Payment Report - Revenue, outstanding, refunds</li> <li>Completion Report - Pass rates, dropout rates</li> <li>Funding Report - Claims by type</li> </ul>"},{"location":"user-guide/overview/","title":"User Guide Overview","text":"<p>Lumina is designed to serve multiple user roles in the training ecosystem. This guide covers the key features and workflows for each role.</p>"},{"location":"user-guide/overview/#user-roles","title":"User Roles","text":""},{"location":"user-guide/overview/#learner","title":"Learner","text":"<p>Learners are individuals who enroll in courses to acquire new skills.</p> <p>Key Features:</p> <ul> <li>Browse and search courses</li> <li>Enroll in course runs</li> <li>Apply for government funding</li> <li>Track learning progress</li> <li>Complete assessments</li> <li>View certificates</li> </ul>"},{"location":"user-guide/overview/#trainer","title":"Trainer","text":"<p>Trainers are instructors who deliver courses and assess learners.</p> <p>Key Features:</p> <ul> <li>View assigned classes</li> <li>Access class rosters</li> <li>Mark attendance</li> <li>Grade assessments</li> <li>Submit learner evaluations</li> </ul>"},{"location":"user-guide/overview/#admin","title":"Admin","text":"<p>Administrators manage the training operations.</p> <p>Key Features:</p> <ul> <li>Create and manage courses</li> <li>Schedule course runs</li> <li>Assign trainers</li> <li>Manage enrollments</li> <li>Process payments</li> <li>Generate reports</li> </ul>"},{"location":"user-guide/overview/#training-provider","title":"Training Provider","text":"<p>Training providers manage their organization's presence on the platform.</p> <p>Key Features:</p> <ul> <li>Organization settings</li> <li>Trainer management</li> <li>Course catalog management</li> <li>Financial reports</li> <li>Funding claim submissions</li> </ul>"},{"location":"user-guide/overview/#core-modules","title":"Core Modules","text":""},{"location":"user-guide/overview/#course-management","title":"Course Management","text":"<p>Courses are organized in a hierarchical structure:</p> <pre><code>Course\n\u251c\u2500\u2500 Topic 1\n\u2502   \u251c\u2500\u2500 Subtopic 1.1\n\u2502   \u2514\u2500\u2500 Subtopic 1.2\n\u251c\u2500\u2500 Topic 2\n\u2502   \u2514\u2500\u2500 Subtopic 2.1\n\u2514\u2500\u2500 Assessment\n</code></pre>"},{"location":"user-guide/overview/#enrollment-lifecycle","title":"Enrollment Lifecycle","text":"<pre><code>Draft \u2192 Pending \u2192 Approved \u2192 Paid \u2192 In Progress \u2192 Completed\n                     \u2193\n                  Rejected\n</code></pre>"},{"location":"user-guide/overview/#payment-processing","title":"Payment Processing","text":"<p>Lumina integrates with Stripe for secure payment processing:</p> <ol> <li>Enrollment created with fee calculation</li> <li>Payment intent generated</li> <li>Learner completes Stripe checkout</li> <li>Webhook confirms payment</li> <li>Enrollment status updated</li> </ol>"},{"location":"user-guide/overview/#government-funding","title":"Government Funding","text":"<p>Lumina automates Singapore government funding calculations:</p> Funding Eligibility Rate SSG Grant WSQ courses 50-70% SkillsFuture Credit Citizens 25+ Up to $500 PSEA Students 16-30 Balance-dependent MCES Citizens 40+ 70% UTAP NTUC members 50% up to $250/year IBF Finance sector Course-specific"},{"location":"user-guide/overview/#navigation","title":"Navigation","text":"<p>The sidebar provides access to all modules based on user role:</p> <p>Learner View: - Dashboard - Browse Courses - My Learning - Certificates</p> <p>Admin View: - Dashboard - Courses - Course Runs - Enrollments - Trainers - Learners - Payments - Reports</p>"},{"location":"user-guide/overview/#next-steps","title":"Next Steps","text":"<ul> <li>Courses - Managing courses</li> <li>Enrollments - Enrollment workflows</li> <li>Payments - Payment processing</li> </ul>"},{"location":"user-guide/payments/","title":"Payments","text":"<p>This guide covers payment processing in Lumina using Stripe.</p>"},{"location":"user-guide/payments/#payment-flow","title":"Payment Flow","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510     \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510     \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  Checkout  \u2502 \u2500\u2500\u25ba \u2502   Stripe   \u2502 \u2500\u2500\u25ba \u2502  Webhook   \u2502\n\u2502   Button   \u2502     \u2502  Checkout  \u2502     \u2502  Handler   \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518     \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518     \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                          \u2502                  \u2502\n                          \u25bc                  \u25bc\n                   \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510     \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n                   \u2502  Payment   \u2502     \u2502 Enrollment \u2502\n                   \u2502 Confirmed  \u2502     \u2502  Updated   \u2502\n                   \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518     \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"user-guide/payments/#for-learners","title":"For Learners","text":""},{"location":"user-guide/payments/#making-a-payment","title":"Making a Payment","text":"<ol> <li>Complete enrollment application</li> <li>Wait for admin approval</li> <li>Click Pay Now on approved enrollment</li> <li>Review fee breakdown</li> <li>Enter card details</li> <li>Complete 3D Secure if required</li> <li>Receive confirmation</li> </ol>"},{"location":"user-guide/payments/#accepted-payment-methods","title":"Accepted Payment Methods","text":"<ul> <li>Credit/Debit Cards (Visa, Mastercard, AMEX)</li> <li>PayNow (coming soon)</li> <li>Bank Transfer (manual processing)</li> </ul>"},{"location":"user-guide/payments/#payment-confirmation","title":"Payment Confirmation","text":"<p>After successful payment:</p> <ul> <li>Email confirmation sent</li> <li>Enrollment status updates to \"Paid\"</li> <li>Course materials become accessible</li> </ul>"},{"location":"user-guide/payments/#refund-requests","title":"Refund Requests","text":"<p>To request a refund:</p> <ol> <li>Go to My Enrollments</li> <li>Select the enrollment</li> <li>Click Request Refund</li> <li>Provide reason</li> <li>Wait for admin review</li> </ol>"},{"location":"user-guide/payments/#for-administrators","title":"For Administrators","text":""},{"location":"user-guide/payments/#viewing-payments","title":"Viewing Payments","text":"<p>Navigate to Payments to see:</p> <ul> <li>All transactions</li> <li>Pending payments</li> <li>Failed payments</li> <li>Refunds</li> </ul>"},{"location":"user-guide/payments/#payment-status","title":"Payment Status","text":"Status Description Pending Payment initiated, not completed Succeeded Payment confirmed Failed Payment failed Refunded Full refund processed Partially Refunded Partial refund issued"},{"location":"user-guide/payments/#manual-payments","title":"Manual Payments","text":"<p>For offline payments:</p> <ol> <li>Go to Enrollments</li> <li>Select the enrollment</li> <li>Click Record Manual Payment</li> <li>Enter:</li> <li>Payment method (Bank Transfer, Cheque)</li> <li>Amount</li> <li>Reference number</li> <li>Date</li> </ol>"},{"location":"user-guide/payments/#processing-refunds","title":"Processing Refunds","text":"<ol> <li>Go to Payments</li> <li>Find the transaction</li> <li>Click Refund</li> <li>Enter refund amount (full or partial)</li> <li>Add reason</li> <li>Confirm</li> </ol> <p>Refund Policy</p> <p>Refunds are processed to the original payment method. Allow 5-10 business days for the refund to appear.</p>"},{"location":"user-guide/payments/#fee-calculation","title":"Fee Calculation","text":""},{"location":"user-guide/payments/#components","title":"Components","text":"<pre><code>interface FeeCalculation {\n  grossCourseFee: number;      // Base fee\n  discount: number;            // Promotional discount\n  discountedFee: number;       // After discount\n  gstAmount: number;           // 9% GST\n  totalWithGst: number;        // Fee + GST\n  fundingBreakdown: {\n    ssgGrant: number;          // Government subsidy\n    skillsFutureCredit: number; // SF Credit applied\n    pseaClaim: number;         // PSEA applied\n    mcesClaim: number;         // MCES applied\n    utapClaim: number;         // UTAP applied\n    ibfFunding: number;        // IBF applied\n  };\n  netPayable: number;          // Final amount\n}\n</code></pre>"},{"location":"user-guide/payments/#gst-rules","title":"GST Rules","text":"<ul> <li>9% GST applies to course fees</li> <li>SSG grants calculated on total (including GST)</li> <li>SkillsFuture Credit applied after GST</li> </ul>"},{"location":"user-guide/payments/#funding-order","title":"Funding Order","text":"<p>Funding is applied in this order:</p> <ol> <li>SSG Grant (percentage of total)</li> <li>MCES (if eligible, replaces SSG rate)</li> <li>SkillsFuture Credit</li> <li>PSEA</li> <li>UTAP</li> <li>IBF</li> </ol>"},{"location":"user-guide/payments/#stripe-integration","title":"Stripe Integration","text":""},{"location":"user-guide/payments/#test-mode","title":"Test Mode","text":"<p>For testing, use Stripe test cards:</p> Card Number Result 4242 4242 4242 4242 Success 4000 0000 0000 0002 Declined 4000 0025 0000 3155 Requires 3DS"},{"location":"user-guide/payments/#webhook-events","title":"Webhook Events","text":"<p>Lumina listens for:</p> Event Action <code>payment_intent.succeeded</code> Update enrollment to Paid <code>payment_intent.payment_failed</code> Log failure, notify admin <code>charge.refunded</code> Update payment status"},{"location":"user-guide/payments/#security","title":"Security","text":"<ul> <li>All payments processed through Stripe</li> <li>No card data stored on Lumina servers</li> <li>PCI DSS compliant</li> <li>3D Secure supported</li> </ul>"},{"location":"user-guide/payments/#reports","title":"Reports","text":""},{"location":"user-guide/payments/#payment-reports","title":"Payment Reports","text":"<ul> <li>Daily Summary - Transactions by day</li> <li>Revenue Report - Monthly revenue breakdown</li> <li>Outstanding Payments - Unpaid enrollments</li> <li>Refund Report - All refunds with reasons</li> </ul>"},{"location":"user-guide/payments/#export-options","title":"Export Options","text":"<p>Reports can be exported as:</p> <ul> <li>CSV</li> <li>PDF</li> <li>Excel</li> </ul>"},{"location":"user-guide/payments/#troubleshooting","title":"Troubleshooting","text":""},{"location":"user-guide/payments/#common-issues","title":"Common Issues","text":"<p>Payment Failed - Check card details - Ensure sufficient funds - Contact bank if blocked</p> <p>Webhook Not Receiving - Verify webhook URL - Check Stripe dashboard for delivery status - Review server logs</p> <p>Refund Not Appearing - Allow 5-10 business days - Check original payment method - Contact support if delayed</p>"}]}